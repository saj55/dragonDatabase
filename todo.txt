Change mainLoop into a session class X
Add a table system - implement your own container
